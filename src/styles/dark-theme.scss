/* 全局深色模式样式 - Adapted for Apple Theme */
body.dark-theme {
  /* Element Plus 变量适配 - 使用透明或 Glass 风格 */
  --el-bg-color: transparent;
  --el-bg-color-page: transparent;
  --el-bg-color-overlay: var(--glass-bg);
  
  /* Global Custom Variables Overrides */
  --bg-color: transparent;
  --bg-color-white: var(--glass-bg);
  --bg-color-light: rgba(255, 255, 255, 0.05);
  
  --text-color-primary: var(--text-primary);
  --text-color-regular: var(--text-secondary);
  --text-color-secondary: var(--text-secondary);
  --text-color-placeholder: var(--input-placeholder);
  
  --el-text-color-primary: var(--text-primary);
  --el-text-color-regular: var(--text-secondary);
  --el-text-color-secondary: var(--text-secondary);
  --el-text-color-placeholder: var(--input-placeholder);
  
  --el-border-color: var(--glass-border);
  --el-border-color-light: var(--glass-border);
  --el-border-color-lighter: var(--glass-border);
  --el-border-color-extra-light: var(--glass-border);
  
  --el-fill-color-blank: transparent;
  --el-fill-color-light: rgba(255, 255, 255, 0.05);
  --el-fill-color-lighter: rgba(255, 255, 255, 0.05);
  
  --el-mask-color: rgba(0, 0, 0, 0.8);

  /* Dialog - Glass Style */
  .el-dialog {
    background: var(--glass-bg);
    backdrop-filter: blur(20px);
    border: 1px solid var(--glass-border);
    border-radius: var(--border-radius-lg);
    box-shadow: var(--glass-shadow);
    
    .el-dialog__header .el-dialog__title {
      color: var(--text-primary);
    }
    .el-dialog__body {
      color: var(--text-primary);
    }
    .el-dialog__footer {
      border-top: 1px solid var(--glass-border);
    }
  }

  /* Inputs - Glass Style */
  .el-input__wrapper,
  .el-textarea__inner,
  .el-select__wrapper {
    background-color: var(--input-bg) !important;
    box-shadow: none !important;
    border: 1px solid var(--input-border);
    
    &:hover {
      border-color: var(--input-focus-border);
    }
    
    &.is-focus, &.is-focused {
      border-color: var(--input-focus-border);
      box-shadow: var(--input-focus-shadow) !important;
    }
    
    .el-input__inner {
      color: var(--input-text);
    }
  }
  
  /* Dropdowns */
  .el-select-dropdown,
  .el-picker-panel,
  .el-popover {
    background: var(--glass-bg) !important;
    backdrop-filter: blur(20px);
    border: 1px solid var(--glass-border) !important;
    
    .el-select-dropdown__item {
      color: var(--text-primary);
      &.hover, &:hover {
        background-color: rgba(255, 255, 255, 0.1);
      }
      &.selected {
        color: #fff;
        background-color: var(--accent-color);
      }
    }
  }

  /* Table - Transparent/Glass */
  .el-table {
    --el-table-bg-color: transparent;
    --el-table-tr-bg-color: transparent;
    --el-table-header-bg-color: rgba(255, 255, 255, 0.05);
    --el-table-header-text-color: var(--text-secondary);
    --el-table-text-color: var(--text-primary);
    --el-table-row-hover-bg-color: rgba(255, 255, 255, 0.1);
    --el-table-border-color: var(--glass-border);
    
    background-color: transparent !important;
    color: var(--text-primary);
    
    th.el-table__cell {
      background-color: rgba(255, 255, 255, 0.05) !important;
    }
    
    .el-table__row {
      background-color: transparent !important;
    }
  }

  /* Pagination */
  .el-pagination {
    --el-pagination-bg-color: transparent;
    --el-pagination-text-color: var(--text-primary);
    --el-pagination-button-bg-color: transparent;
    
    button {
      background-color: transparent !important;
    }
    
    .el-pager li {
      background-color: transparent !important;
      
      &.is-active {
        background-color: var(--accent-color) !important;
        color: #fff;
      }
    }
  }

  /* 修复 el-tooltip 触发时的 aria-describedby 导致的样式问题 */
  .el-button[aria-describedby] {
    &:hover, &:focus {
      outline: none !important;
      box-shadow: none !important;
    }
    
    /* 强制去除可能的白色遮罩或背景 */
    &.is-plain {
      &::before, &::after {
        background-color: transparent !important;
        box-shadow: none !important;
      }
    }
  }

  /* Buttons - Dark Mode Adaptation */
  .el-button {
    &.is-plain {
      --el-button-hover-text-color: #ffffff !important;
      
      /* Primary (Blue) */
      &.el-button--primary {
        --el-button-text-color: #0a84ff;
        --el-button-bg-color: rgba(10, 132, 255, 0.15);
        --el-button-border-color: rgba(10, 132, 255, 0.3);
        --el-button-hover-bg-color: #0a84ff;
        --el-button-hover-border-color: #0a84ff;
        
        &:hover, &:focus, &[aria-describedby] {
          background-color: #0a84ff !important;
          border-color: #0a84ff !important;
          color: #ffffff !important;
          outline: none !important;
          box-shadow: none !important;
        }
      }
      
      /* Success (Green) */
      &.el-button--success {
        --el-button-text-color: #32d74b;
        --el-button-bg-color: rgba(50, 215, 75, 0.15);
        --el-button-border-color: rgba(50, 215, 75, 0.3);
        --el-button-hover-bg-color: #32d74b;
        --el-button-hover-border-color: #32d74b;
        
        &:hover, &:focus, &[aria-describedby] {
          background-color: #32d74b !important;
          border-color: #32d74b !important;
          color: #ffffff !important;
          outline: none !important;
          box-shadow: none !important;
        }
      }
      
      /* Warning (Orange) */
      &.el-button--warning {
        --el-button-text-color: #ff9f0a;
        --el-button-bg-color: rgba(255, 159, 10, 0.15);
        --el-button-border-color: rgba(255, 159, 10, 0.3);
        --el-button-hover-bg-color: #ff9f0a;
        --el-button-hover-border-color: #ff9f0a;
        
        &:hover, &:focus, &[aria-describedby] {
          background-color: #ff9f0a !important;
          border-color: #ff9f0a !important;
          color: #ffffff !important;
          outline: none !important;
          box-shadow: none !important;
        }
      }
      
      /* Danger (Red) */
      &.el-button--danger {
        --el-button-text-color: #ff453a;
        --el-button-bg-color: rgba(255, 69, 58, 0.15);
        --el-button-border-color: rgba(255, 69, 58, 0.3);
        --el-button-hover-bg-color: #ff453a;
        --el-button-hover-border-color: #ff453a;
        
        &:hover, &:focus, &[aria-describedby] {
          background-color: #ff453a !important;
          border-color: #ff453a !important;
          color: #ffffff !important;
          outline: none !important;
          box-shadow: none !important;
        }
      }
      
      /* Info (Gray) */
      &.el-button--info {
        --el-button-text-color: #8e8e93;
        --el-button-bg-color: rgba(142, 142, 147, 0.15);
        --el-button-border-color: rgba(142, 142, 147, 0.3);
        --el-button-hover-bg-color: #8e8e93;
        --el-button-hover-border-color: #8e8e93;
        
        &:hover, &:focus, &[aria-describedby] {
          background-color: #8e8e93 !important;
          border-color: #8e8e93 !important;
          color: #ffffff !important;
          outline: none !important;
          box-shadow: none !important;
        }
      }
    }
  }

  /* Tooltip Styles - Dark Mode */
  /* 用户要求：深色模式下，悬停出现的框（Tooltip）背景应该是黑色，字体是白色 */
  .el-popper.is-dark, .el-popper.is-light {
    background: #1c1c1e !important; /* Apple Dark Grey */
    color: #ffffff !important;
    border: 1px solid rgba(255, 255, 255, 0.15) !important;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5) !important;
    
    .el-popper__arrow::before {
      background: #1c1c1e !important;
      border: 1px solid rgba(255, 255, 255, 0.15) !important;
    }
  }
}
